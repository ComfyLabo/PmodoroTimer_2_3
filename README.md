# Nice Pomodoro Timer

シンプルかつ使いやすい Chrome 向けのポモドーロタイマー拡張です。5 / 10 / 15 / 25 / 30 / 45 / 60 分のプリセットから選び、今取り組んでいるタスクを入力して集中セッションを開始できます。バッジ表示・通知・履歴管理にも対応しています。

## インストール

Chrome ウェブストアには公開していないため、ローカルで読み込んで利用します。

1. このリポジトリをクローン、または ZIP でダウンロードして展開します。
2. Chrome で `chrome://extensions/` を開きます。
3. 右上の「デベロッパーモード」をオンにします。
4. 「パッケージ化されていない拡張機能を読み込む」をクリックし、リポジトリのフォルダ (`manifest.json` があるディレクトリ) を選択します。
5. ツールバーに拡張機能のアイコンが追加されます。ピン留めしておくとアクセスしやすくなります。

## 使い方

1. 拡張アイコンをクリックしてポップアップを開きます。
2. 「今は何に集中？」欄にタスク名を入力します (任意)。
3. 7 種類のボタンから集中時間を選びます。選択するとボタンがハイライトされます。
4. `Start` を押すとタイマーが開始され、プログレスバーと残り時間が更新されます。
5. セッション中は以下の操作が可能です。
   - `Pause` / `Resume`: 一時停止と再開
   - `Stop`: その時点でセッションを終了し、履歴に記録
   - `Reset`: 設定をクリアして待機状態に戻す (履歴はそのまま)
6. タイマーが終了するとブラウザ通知と短いビープ音 (ポップアップを開いている場合) で完了をお知らせします。
7. アイコンのバッジには残り分数 (一時停止中は ⏸) が表示されます。

## 履歴の活用

- ポップアップ下部に最近 30 件までのセッションが新しい順で表示されます。
- 各履歴の「編集」を押すとタスク名と所要時間を修正できます。`Enter` で保存、`Esc` でキャンセルできます。
- 「クリア」を押すと履歴を全削除します。

## 保存されるデータ

- 現在のタイマー状態と履歴は `chrome.storage.local` に保存されます。ブラウザを閉じても保持されます。
- 履歴は 30 件を超えると古い順に自動的に削除されます。

## 利用している権限

- `alarms`: タイマー終了やバッジ更新用のアラームスケジュール
- `storage`: タイマー状態と履歴の保存
- `notifications`: タイマー完了時の通知表示

## 開発メモ

- バックグラウンドでは Manifest V3 の Service Worker (`background.js`) を使用しています。
- UI (`popup.html` / `popup.js`) では AudioContext を用いたビープ音再生、履歴編集などの機能を提供しています。
